<!doctype html> <html lang="ja"> 

<head> 
  <meta name="robots" content="noindex, nofollow">
  <meta charset="utf-8"> 
  <meta name="viewport" content="width=device-width,initial-scale=1">
 <title>推し活タイプ診断</title> 
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f6f6f6;
      display: flex;
      align-items: center;
      justify-content: center;
      height: 100vh;
    }

    .chat {
      width: 360px;
      background: #fff;
      border-radius: 12px;
      padding: 12px;
    }

    .message {
      padding: 10px 12px;
      border-radius: 12px;
      margin: 8px 0;
    }

    .bot {
      background: #eee;
      align-self: flex-start
    }

    .user {
      background: #d1f0ff;
      align-self: flex-end
    }

    .controls {
      display: flex;
      flex-direction: column;
      gap: 8px;
      margin-top: 8px;
    }

    .button-row {
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .label-row {
      display: flex;
      justify-content: space-between;
      font-size: 12px;
      color: #666;
      padding: 0 4px;
    }

    button {
      padding: 0;
      border-radius: 50%;
      background: transparent;
      cursor: pointer;
      transition: all 0.2s;
    }

    button.btn-pink {
      border: 3px solid #ff69b4;
    }

    button.btn-pink:hover {
      background: rgba(255, 105, 180, 0.2);
    }

    button.btn-cyan {
      border: 3px solid #5bc0de;
    }

    button.btn-cyan:hover {
      background: rgba(91, 192, 222, 0.2);
    }

    button.btn-large {
      width: 44px;
      height: 44px;
    }

    button.btn-medium {
      width: 36px;
      height: 36px;
    }

    button.btn-small {
      width: 28px;
      height: 28px;
    }

    .small {
      font-size: 12px;
      color: #666
    }
  </style> </head> 

<body> <div class="chat" id="chat">  <div class="message bot" id="intro">こんにちは！推し活診断へようこそ。6段階で答えてください。（全20問）</div> </div> <script>
    const q = [
      // Q1-Q20：配列にAが1ならR/E/D/S寄り、Bが0ならW/I/L/V寄りに割り当て
      {
        t: 'R',
        q: '推しを見るとき、あなたは物語を妄想する？',
        a: 1
      },
      {
        t: 'R',
        q: '推しが恋愛したら少し複雑に感じる？',
        a: 1
      },
      {
        t: 'R',
        q: '推しへの感情の主語は「私（恋）」？',
        a: 1
      },
      {
        t: 'R',
        q: '推しの言動で動くのは心（感情）？',
        a: 1
      },
      {
        t: 'R',
        q: '推しを形容するなら「恋」？',
        a: 1
      },

      {
        t: 'E',
        q: '推し語りは共有したい？',
        a: 1
      },
      {
        t: 'E',
        q: '現場は友達と行くのが楽しい？',
        a: 1
      },
      {
        t: 'E',
        q: 'SNSで感想を投稿することが多い？',
        a: 1
      },
      {
        t: 'E',
        q: '同担と語るのが嬉しい？',
        a: 1
      },
      {
        t: 'E',
        q: '推し活は交流のきっかけ？',
        a: 1
      },

      {
        t: 'D',
        q: '現場は行けるなら全部行く？',
        a: 1
      },
      {
        t: 'D',
        q: 'グッズは積極的に揃える？',
        a: 1
      },
      {
        t: 'D',
        q: '記念日を必ずお祝いする？',
        a: 1
      },
      {
        t: 'D',
        q: '推し活が生活の中心になることがある？',
        a: 1
      },
      {
        t: 'D',
        q: '気持ちの温度は安定して高い？',
        a: 1
      },

      {
        t: 'S',
        q: '基本は1人の推しを長く推す？',
        a: 1
      },
      {
        t: 'S',
        q: '新しいジャンルには慎重？',
        a: 1
      },
      {
        t: 'S',
        q: '沼の移動はあまりしない？',
        a: 1
      },
      {
        t: 'S',
        q: '創作欲はあまり湧かない？',
        a: 1
      },
      {
        t: 'S',
        q: '直感で好きになる頻度は低い？',
        a: 1
      }
    ];

    let idx = 0;
    const state = {
      R: 0,
      E: 0,
      D: 0,
      S: 0
    };

    function appendBot(text) {
      const d = document.createElement('div');
      d.className = 'message bot';
      d.textContent = text;
      document.getElementById('chat').appendChild(d);
    }

    function appendUser(text) {
      const d = document.createElement('div');
      d.className = 'message user';
      d.textContent = text;
      document.getElementById('chat').appendChild(d);
    }

    function showQuestion() {
      if (idx >= q.length) {
        showResult();
        return;
      }
      appendBot((idx + 1) + '. ' + q[idx].q);
      const controls = document.createElement('div');
      controls.className = 'controls';

      const labelRow = document.createElement('div');
      labelRow.className = 'label-row';
      const labelLeft = document.createElement('span');
      labelLeft.textContent = 'そう思う';
      const labelRight = document.createElement('span');
      labelRight.textContent = 'そう思わない';
      labelRow.appendChild(labelLeft);
      labelRow.appendChild(labelRight);
      controls.appendChild(labelRow);

      const buttonRow = document.createElement('div');
      buttonRow.className = 'button-row';
      const scores = [5, 4, 3, 2, 1, 0];
      const sizes = ['btn-large', 'btn-medium', 'btn-small', 'btn-small', 'btn-medium', 'btn-large'];
      scores.forEach((score, index) => {
        const btn = document.createElement('button');
        const colorClass = index < 3 ? 'btn-pink' : 'btn-cyan';
        btn.className = colorClass + ' ' + sizes[index];
        btn.onclick = () => {
          answer(score)
        };
        buttonRow.appendChild(btn);
      });
      controls.appendChild(buttonRow);

      document.getElementById('chat').appendChild(controls);
    }

    function answer(val) { // val 0-5: 5=そう思う, 0=そう思わない
      const controls = document.querySelector('.controls');
      if (controls) controls.remove();
      const labels = ['そう思う', 'ややそう思う', '少しそう思う', 'あまりそう思わない', 'ややそう思わない', 'そう思わない'];
      appendUser(labels[5 - val]);
      // tally: グラデーション値をスコアに加算
      const t = q[idx].t;
      state[t] += val;
      idx++;
      setTimeout(showQuestion, 300);
    }

    function showResult() { // decide each axis
      // 各traitは5問×最大5点=最大25点、閾値は中央値の12.5を超えるかどうか
      const threshold = 13;
      const res = [];
      res.push(state.R >= threshold ? 'R' : 'W');
      res.push(state.E >= threshold ? 'E' : 'I');
      res.push(state.D >= threshold ? 'D' : 'L');
      res.push(state.S >= threshold ? 'S' : 'V');
      const type = res.join('');
      appendBot('診断結果：' + type);
      // short desc
      const shortMap = {
        'REDS': '永遠のガチ恋語り手',
        'REDV': '恋多き情熱クリエイター',
        'RELS': 'ゆるガチ恋ストーリーテラー',
        'RELV': '気まぐれ恋心の発信者',
        'RIDS': '静かに燃えるガチ恋',
        'RIDV': '恋多き隠れ沼ダイバー',
        'RILS': '静かに想うゆるガチ恋',
        'RILV': '気まぐれ恋心コレクター',
        'WEDS': '推しの布教長官',
        'WEDV': '尊みのマルチ伝道師',
        'WELS': 'ゆる尊み語り部',
        'WELV': 'ゆる尊みコレクター',
        'WIDS': '静かな忠誠心',
        'WIDV': '静かなる多界隈ウォッチャー',
        'WILS': 'マイペース見守り隊',
        'WILV': '静かにいろいろ愛でる人'
      };
      appendBot('あなたのタイプは: ' + shortMap[type] + '（' + type + '）');
      appendBot('もっと詳しい説明を見たい場合は、このHTMLをベースに結果ページを作成してください。');
    }
    // start
    setTimeout(showQuestion, 700);
  </script> </body> 

</html>
